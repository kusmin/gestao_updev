basePath: /v1
definitions:
  handler.BookingCancelRequest:
    properties:
      reason:
        type: string
    type: object
  handler.BookingRequest:
    properties:
      client_id:
        type: string
      end_at:
        type: string
      notes:
        type: string
      professional_id:
        type: string
      service_id:
        type: string
      start_at:
        type: string
      status:
        type: string
    required:
    - client_id
    - professional_id
    - service_id
    - start_at
    type: object
  handler.BookingUpdateRequest:
    properties:
      end_at:
        type: string
      notes:
        type: string
      start_at:
        type: string
      status:
        type: string
    type: object
  handler.ClientRequest:
    properties:
      contact:
        additionalProperties: true
        type: object
      email:
        type: string
      name:
        type: string
      notes:
        type: string
      phone:
        type: string
      tags:
        items:
          type: string
        type: array
    required:
    - name
    type: object
  handler.CompanyUpdateRequest:
    properties:
      email:
        type: string
      name:
        type: string
      phone:
        type: string
      settings:
        additionalProperties: true
        type: object
      timezone:
        type: string
    type: object
  handler.CreateUserRequest:
    properties:
      email:
        type: string
      name:
        type: string
      password:
        minLength: 8
        type: string
      phone:
        type: string
      role:
        type: string
    required:
    - email
    - name
    - password
    - role
    type: object
  handler.InventoryRequest:
    properties:
      order_id:
        type: string
      product_id:
        type: string
      quantity:
        type: integer
      reason:
        type: string
      type:
        type: string
    required:
    - product_id
    - quantity
    - type
    type: object
  handler.LoginRequest:
    properties:
      email:
        type: string
      password:
        type: string
    required:
    - email
    - password
    type: object
  handler.PaymentRequest:
    properties:
      amount:
        type: number
      details:
        additionalProperties: true
        type: object
      method:
        type: string
      paid_at:
        type: string
    required:
    - amount
    - method
    - paid_at
    type: object
  handler.ProductRequest:
    properties:
      cost:
        type: number
      description:
        type: string
      metadata:
        additionalProperties: true
        type: object
      min_stock:
        type: integer
      name:
        type: string
      price:
        type: number
      sku:
        type: string
      stock_qty:
        type: integer
    required:
    - name
    - price
    - sku
    type: object
  handler.RefreshRequest:
    properties:
      refresh_token:
        type: string
    required:
    - refresh_token
    type: object
  handler.SalesOrderItemRequest:
    properties:
      quantity:
        type: integer
      ref_id:
        type: string
      type:
        type: string
      unit_price:
        type: number
    required:
    - quantity
    - ref_id
    - type
    - unit_price
    type: object
  handler.SalesOrderRequest:
    properties:
      booking_id:
        type: string
      client_id:
        type: string
      discount:
        type: number
      items:
        items:
          $ref: '#/definitions/handler.SalesOrderItemRequest'
        type: array
      notes:
        type: string
    required:
    - client_id
    - items
    type: object
  handler.SalesOrderUpdateRequest:
    properties:
      notes:
        type: string
      status:
        type: string
    type: object
  handler.ServiceRequest:
    properties:
      category:
        type: string
      color:
        type: string
      description:
        type: string
      duration_minutes:
        type: integer
      metadata:
        additionalProperties: true
        type: object
      name:
        type: string
      price:
        type: number
    required:
    - duration_minutes
    - name
    - price
    type: object
  handler.SignupRequest:
    properties:
      company:
        properties:
          document:
            type: string
          name:
            type: string
          phone:
            type: string
        required:
        - name
        type: object
      user:
        properties:
          email:
            type: string
          name:
            type: string
          password:
            minLength: 8
            type: string
          phone:
            type: string
        required:
        - email
        - name
        - password
        type: object
    required:
    - company
    - user
    type: object
  handler.UpdateUserRequest:
    properties:
      active:
        type: boolean
      name:
        type: string
      password:
        type: string
      phone:
        type: string
      role:
        type: string
    type: object
  response.APIResponse:
    properties:
      data: {}
      error: {}
      meta: {}
    type: object
host: localhost:8080
info:
  contact:
    email: support@updev.com
    name: API Support
  description: API para a plataforma de gestão de comércios locais.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: Gestão UpDev API
  version: "1.0"
paths:
  /auth/login:
    post:
      consumes:
      - application/json
      parameters:
      - description: Credenciais
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.APIResponse'
      summary: Autentica usuário
      tags:
      - Auth
  /auth/refresh:
    post:
      consumes:
      - application/json
      parameters:
      - description: Refresh token
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.RefreshRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.APIResponse'
      summary: Atualiza tokens de acesso
      tags:
      - Auth
  /auth/signup:
    post:
      consumes:
      - application/json
      description: 'Fluxo inicial da plataforma: cria empresa, usuário admin e retorna
        tokens.'
      parameters:
      - description: Dados do signup
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.SignupRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/response.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
      summary: Cria empresa e usuário administrador
      tags:
      - Auth
  /bookings:
    get:
      parameters:
      - description: Data (YYYY-MM-DD)
        in: query
        name: date
        type: string
      - description: Profissional
        in: query
        name: professional_id
        type: string
      - description: Status
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Lista agendamentos
      tags:
      - Bookings
    post:
      consumes:
      - application/json
      parameters:
      - description: Agendamento
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.BookingRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Cria agendamento
      tags:
      - Bookings
  /bookings/{id}:
    patch:
      consumes:
      - application/json
      parameters:
      - description: Booking ID
        in: path
        name: id
        required: true
        type: string
      - description: Campos editáveis
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.BookingUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Atualiza agendamento
      tags:
      - Bookings
  /bookings/{id}/cancel:
    post:
      consumes:
      - application/json
      parameters:
      - description: Booking ID
        in: path
        name: id
        required: true
        type: string
      - description: Motivo
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.BookingCancelRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Cancela agendamento
      tags:
      - Bookings
  /clients:
    get:
      parameters:
      - description: Filtro por nome/email/telefone
        in: query
        name: search
        type: string
      - description: Lista de tags separadas por vírgula
        in: query
        name: tags
        type: string
      - default: 1
        description: Página
        in: query
        name: page
        type: integer
      - default: 20
        description: Itens por página
        in: query
        name: per_page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Lista clientes
      tags:
      - Clients
    post:
      consumes:
      - application/json
      parameters:
      - description: Cliente
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.ClientRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/response.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Cria cliente
      tags:
      - Clients
  /clients/{id}:
    delete:
      parameters:
      - description: Client ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Remove cliente
      tags:
      - Clients
    get:
      parameters:
      - description: Client ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Busca cliente
      tags:
      - Clients
    put:
      consumes:
      - application/json
      parameters:
      - description: Client ID
        in: path
        name: id
        required: true
        type: string
      - description: Cliente
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.ClientRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Atualiza cliente
      tags:
      - Clients
  /companies/me:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Retorna dados da empresa atual
      tags:
      - Company
    put:
      consumes:
      - application/json
      parameters:
      - description: Campos editáveis
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CompanyUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Atualiza dados da empresa atual
      tags:
      - Company
  /dashboard/daily:
    get:
      parameters:
      - description: Data (YYYY-MM-DD)
        in: query
        name: date
        type: string
      - description: Profissional
        in: query
        name: professional_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: KPIs diários
      tags:
      - Dashboard
  /inventory/movements:
    get:
      parameters:
      - description: Filtro por produto
        in: query
        name: product_id
        type: string
      - description: Tipo (in|out|adjustment)
        in: query
        name: type
        type: string
      - description: Data inicial (RFC3339)
        in: query
        name: start_date
        type: string
      - description: Data final (RFC3339)
        in: query
        name: end_date
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Lista movimentações de estoque
      tags:
      - Inventory
    post:
      consumes:
      - application/json
      parameters:
      - description: Movimentação
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.InventoryRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Registra movimento de estoque
      tags:
      - Inventory
  /payments:
    get:
      parameters:
      - description: Método
        in: query
        name: method
        type: string
      - description: Data inicial RFC3339
        in: query
        name: start_date
        type: string
      - description: Data final RFC3339
        in: query
        name: end_date
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Lista pagamentos
      tags:
      - Payments
  /products:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Lista produtos
      tags:
      - Products
    post:
      consumes:
      - application/json
      parameters:
      - description: Produto
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.ProductRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Cria produto
      tags:
      - Products
  /products/{id}:
    delete:
      parameters:
      - description: Product ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Remove produto
      tags:
      - Products
    put:
      consumes:
      - application/json
      parameters:
      - description: Product ID
        in: path
        name: id
        required: true
        type: string
      - description: Produto
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.ProductRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Atualiza produto
      tags:
      - Products
  /professionals:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Lista profissionais ativos
      tags:
      - Professionals
  /sales/orders:
    get:
      parameters:
      - description: Status
        in: query
        name: status
        type: string
      - description: Cliente
        in: query
        name: client_id
        type: string
      - description: Data (YYYY-MM-DD)
        in: query
        name: date
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Lista pedidos/vendas
      tags:
      - Sales
    post:
      consumes:
      - application/json
      parameters:
      - description: Pedido
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.SalesOrderRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Cria pedido/venda
      tags:
      - Sales
  /sales/orders/{id}:
    patch:
      consumes:
      - application/json
      parameters:
      - description: Order ID
        in: path
        name: id
        required: true
        type: string
      - description: Campos editáveis
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.SalesOrderUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Atualiza pedido
      tags:
      - Sales
  /sales/orders/{id}/payments:
    post:
      consumes:
      - application/json
      parameters:
      - description: Order ID
        in: path
        name: id
        required: true
        type: string
      - description: Pagamento
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.PaymentRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Registra pagamento
      tags:
      - Payments
  /services:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Lista serviços
      tags:
      - Services
    post:
      consumes:
      - application/json
      parameters:
      - description: Serviço
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.ServiceRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Cria serviço
      tags:
      - Services
  /services/{id}:
    delete:
      parameters:
      - description: Service ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Remove serviço
      tags:
      - Services
    put:
      consumes:
      - application/json
      parameters:
      - description: Service ID
        in: path
        name: id
        required: true
        type: string
      - description: Serviço
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.ServiceRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Atualiza serviço
      tags:
      - Services
  /users:
    get:
      parameters:
      - description: Filtro por role
        in: query
        name: role
        type: string
      - default: 1
        description: Página
        in: query
        name: page
        type: integer
      - default: 20
        description: Itens por página
        in: query
        name: per_page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Lista usuários do tenant
      tags:
      - Users
    post:
      consumes:
      - application/json
      parameters:
      - description: Novo usuário
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreateUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/response.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Cria um usuário
      tags:
      - Users
  /users/{id}:
    delete:
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Remove (soft delete) um usuário
      tags:
      - Users
    patch:
      consumes:
      - application/json
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: Campos editáveis
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      - TenantHeader: []
      summary: Atualiza parcialmente um usuário
      tags:
      - Users
securityDefinitions:
  BearerAuth:
    description: Token JWT no formato `Bearer <token>`
    in: header
    name: Authorization
    type: apiKey
  TenantHeader:
    in: header
    name: X-Tenant-ID
    type: apiKey
swagger: "2.0"
